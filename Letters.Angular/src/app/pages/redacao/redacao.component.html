<div class="redacao-container">
  <div class="redacao-header">
    <h1>
      <i class="icon">âœï¸</i>
      Escreva sua RedaÃ§Ã£o
    </h1>
    <p class="subtitle">Receba correÃ§Ã£o instantÃ¢nea com InteligÃªncia Artificial</p>
  </div>

  <div class="content-wrapper">
    <!-- SeleÃ§Ã£o de Tema -->
    <div class="tema-section">
      <h2>ğŸ“š Escolha um Tema</h2>
      <div class="temas-grid">
        <div 
          *ngFor="let temaSugerido of temasSugeridos" 
          class="tema-card"
          [class.selected]="tema === temaSugerido"
          (click)="selecionarTema(temaSugerido)">
          <span class="tema-text">{{ temaSugerido }}</span>
          <span class="check-icon" *ngIf="tema === temaSugerido">âœ“</span>
        </div>
      </div>
      
      <div class="tema-custom">
        <input 
          type="text" 
          placeholder="Ou digite seu prÃ³prio tema..."
          [(ngModel)]="tema"
          class="tema-input">
      </div>
    </div>

    <!-- Editor de Texto -->
    <div class="editor-section">
      <div class="editor-header">
        <h2>ğŸ“ Sua RedaÃ§Ã£o</h2>
        <div class="stats">
          <span class="stat">{{ caracterCount }} caracteres</span>
          <span class="stat">{{ wordCount }} palavras</span>
        </div>
      </div>

      <div class="editor-container">
        <textarea
          class="editor-textarea"
          placeholder="Comece a escrever sua redaÃ§Ã£o aqui... 

            Dicas:
            â€¢ Use parÃ¡grafos para organizar suas ideias
            â€¢ Mantenha uma estrutura: introduÃ§Ã£o, desenvolvimento e conclusÃ£o
            â€¢ Apresente argumentos claros e bem fundamentados
            â€¢ Revise seu texto antes de enviar para correÃ§Ã£o"
          [(ngModel)]="redacaoContent"
          (input)="onContentChange($event)">
        </textarea>
      </div>

      <div class="editor-actions">
        <button 
          class="btn btn-secondary" 
          (click)="limparRedacao()"
          [disabled]="isLoading">
          ğŸ—‘ï¸ Limpar
        </button>
        
        <button 
          class="btn btn-primary" 
          (click)="corrigirRedacao()"
          [disabled]="isLoading || !redacaoContent.trim() || !tema">
          <span *ngIf="!isLoading">ğŸ¤– Corrigir com IA</span>
          <span *ngIf="isLoading" class="loading">
            <div class="spinner"></div>
            Corrigindo...
          </span>
        </button>
      </div>
    </div>

    <!-- Resultado da CorreÃ§Ã£o -->
    <div class="resultado-section" *ngIf="correcaoResultado">
      <div class="resultado-header">
        <h2>ğŸ¯ Resultado da CorreÃ§Ã£o</h2>
        <div class="nota-badge">
          <span class="nota-label">Nota:</span>
          <span class="nota-valor">{{ correcaoResultado.nota }}/1000</span>
        </div>
      </div>

      <div class="resultado-content">
        <div class="resultado-card">
          <h3>ğŸ’¬ ComentÃ¡rios</h3>
          <ul class="comentarios-list">
            <li *ngFor="let comentario of correcaoResultado.comentarios">
              {{ comentario }}
            </li>
          </ul>
        </div>

        <div class="resultado-grid">
          <div class="resultado-card pontos-fortes">
            <h3>âœ… Pontos Fortes</h3>
            <div class="tags">
              <span 
                *ngFor="let ponto of correcaoResultado.pontosFortesEncontrados" 
                class="tag success">
                {{ ponto }}
              </span>
            </div>
          </div>

          <div class="resultado-card melhorias">
            <h3>ğŸ¯ SugestÃµes de Melhoria</h3>
            <div class="tags">
              <span 
                *ngFor="let melhoria of correcaoResultado.melhorias" 
                class="tag warning">
                {{ melhoria }}
              </span>
            </div>
          </div>
        </div>

        <div class="resultado-card analise-detalhada" *ngIf="correcaoResultado.analiseDetalhada">
          <h3>ğŸ“Š AnÃ¡lise Detalhada</h3>
          <div class="analise-content">
            {{ correcaoResultado.analiseDetalhada }}
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<p-toast></p-toast>